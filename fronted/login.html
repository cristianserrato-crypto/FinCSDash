<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Codificación para soportar caracteres especiales -->
    <meta charset="UTF-8">

    <!-- Título que aparece en la pestaña del navegador -->
    <title>Login - FinCSDash</title>
</head>
<body>

    <!-- Título principal de la pantalla -->
    <h2>Iniciar sesión</h2>

    <!-- Formulario de login -->
    <!-- id se usa para capturar el evento desde JavaScript -->
    <form id="loginForm">

        <!-- Campo para el correo electrónico -->
        <label>Email:</label><br>
        <input type="email" id="email" required><br><br>

        <!-- Campo para la contraseña -->
        <label>Contraseña:</label><br>
        <input type="password" id="password" required><br><br>

        <!-- Botón para enviar el formulario -->
        <button type="submit">Ingresar</button>
    </form>

    <!-- Aquí se mostrará el resultado del login -->
    <p id="resultado"></p>

    <!-- Código JavaScript -->
    <script>
        // Capturamos el evento submit del formulario
        document.getElementById("loginForm").addEventListener("submit", function(e) {

            // Evita que el navegador recargue la página
            e.preventDefault();

            // Enviamos los datos al backend usando fetch
            fetch("http://127.0.0.1:5000/login", {
                method: "POST", // Método POST para enviar datos
                headers: {
                    "Content-Type": "application/json"
                },
                // Convertimos los datos a formato JSON
                body: JSON.stringify({
                    email: document.getElementById("email").value,
                    password: document.getElementById("password").value
                })
            })
            // Convertimos la respuesta a JSON
            .then(res => res.json())

            // Mostramos el mensaje devuelto por el backend
            .then(data => {
                document.getElementById("resultado").innerText = data.message;
            });
        });
    </script>

</body>
</html>
